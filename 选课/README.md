<<<<<<< HEAD
# å¤§å­¦ç”Ÿé€‰è¯¾ç½‘ç«™ï¼ˆSupabase + çº¯ HTMLï¼‰

è¯¥ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ **Supabase** ä½œä¸ºåŽç«¯æ•°æ®åº“ï¼Œæ­é…åŽŸç”Ÿ HTML/CSS/JS æž„å»ºä¸€ä¸ªç®€æ˜“çš„å¤§å­¦ç”Ÿé€‰è¯¾ç³»ç»Ÿã€‚åŠŸèƒ½åŒ…æ‹¬ï¼š

- é‚®ç®±æ³¨å†Œ / ç™»å½•ï¼ˆSupabase Authï¼‰
- è¯¾ç¨‹åˆ—è¡¨å±•ç¤ºã€æœç´¢ä¸Žå­¦åˆ†ç­›é€‰
- å­¦ç”Ÿé€‰è¯¾ / é€€è¯¾ & æˆ‘çš„è¯¾è¡¨

## ç›®å½•ç»“æž„

```
.
â”œâ”€â”€ index.html              # ä¸»é¡µé¢
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ styles.css          # é¡µé¢æ ·å¼
â”‚   â”œâ”€â”€ app.js              # å‰ç«¯é€»è¾‘ï¼ˆä¸Ž Supabase äº¤äº’ï¼‰
â”‚   â”œâ”€â”€ config.js           # Supabase å®¢æˆ·ç«¯é…ç½®ï¼ˆéœ€è¦è‡ªè¡Œå¡«å†™ï¼‰
â”‚   â””â”€â”€ config.example.js   # é…ç½®ç¤ºä¾‹
â””â”€â”€ README.md
```

## å¿«é€Ÿå¼€å§‹

1. **å…‹éš†æˆ–ä¸‹è½½**æœ¬ä»“åº“æ–‡ä»¶è‡³ä»»æ„é™æ€ç«™ç‚¹çŽ¯å¢ƒï¼ˆæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿã€Vercelã€Netlifyã€Supabase Hosting ç­‰ï¼‰ã€‚
2. åœ¨ Supabase æŽ§åˆ¶å°æ–°å»ºé¡¹ç›®ï¼Œè®°å½• `Project URL` ä¸Ž `anon public API key`ã€‚
3. å¤åˆ¶ `assets/config.example.js` ä¸º `assets/config.js`ï¼Œå¹¶å¡«å…¥è‡ªå·±çš„é¡¹ç›®å‚æ•°ï¼š

   ```js
   window.supabaseConfig = {
     url: "https://YOUR-PROJECT-REF.supabase.co",
     anonKey: "YOUR_PUBLIC_ANON_KEY"
   };
   ```

4. æ‰“å¼€ `index.html`ï¼ˆåŒå‡»æˆ–ç”¨æœ¬åœ°å¼€å‘æœåŠ¡å™¨ï¼‰ï¼Œå³å¯ä½¿ç”¨ã€‚

> **æç¤º**ï¼šä¸ºäº†é¿å…æ³„éœ² keyï¼Œè¯·å‹¿å°†å¡«å¥½å¯†é’¥çš„ `config.js` ä¸Šä¼ åˆ°å…¬å…±ä»“åº“ã€‚

## æ•°æ®åº“ç»“æž„ï¼ˆå»ºè®®ï¼‰

åœ¨ Supabase SQL Editor ä¸­ä¾æ¬¡æ‰§è¡Œï¼š

```sql
create table if not exists public.courses (
  id bigint generated by default as identity primary key,
  code text unique not null,
  name text not null,
  teacher text not null,
  credit integer not null default 2,
  schedule text,
  created_at timestamptz default now()
);

create table if not exists public.students (
  id uuid primary key references auth.users on delete cascade,
  full_name text not null,
  email text not null,
  created_at timestamptz default now()
);

create table if not exists public.enrollments (
  id bigint generated by default as identity primary key,
  student_id uuid references public.students(id) on delete cascade,
  course_id bigint references public.courses(id) on delete cascade,
  created_at timestamptz default now(),
  unique (student_id, course_id)
);
```

### Row Level Security

å¼€å¯ RLS åŽæ·»åŠ ä»¥ä¸‹ç­–ç•¥ï¼š

```sql
-- courses: å…è®¸æ‰€æœ‰ç™»å½•ç”¨æˆ·è¯»å–
create policy "Courses are readable" on public.courses
for select using (auth.role() = 'authenticated');

-- students: åªæœ‰æœ¬äººå¯è¯»å†™
create policy "Students manage themselves" on public.students
for select using (auth.uid() = id);
create policy "Students insert themselves" on public.students
for insert with check (auth.uid() = id);

-- enrollments: å­¦ç”Ÿåªèƒ½æ“ä½œè‡ªå·±çš„è®°å½•
create policy "Read own enrollments" on public.enrollments
for select using (student_id = auth.uid());
create policy "Insert own enrollments" on public.enrollments
for insert with check (student_id = auth.uid());
create policy "Delete own enrollments" on public.enrollments
for delete using (student_id = auth.uid());
```

## å¸¸è§é—®é¢˜

- **ç™»å½•æç¤ºé‚®ç®±æœªéªŒè¯**ï¼šSupabase é»˜è®¤è¦æ±‚é‚®ç®±éªŒè¯ã€‚è¯·åœ¨æ³¨å†ŒåŽæ£€æŸ¥é‚®ä»¶ç¡®è®¤æˆ–å…³é—­éªŒè¯ã€‚
- **CORS / Mixed Content**ï¼šç¡®ä¿é€šè¿‡ HTTPS è®¿é—®é¡µé¢ï¼Œæˆ–åœ¨æœ¬åœ° `file://` æ¨¡å¼ä¸‹æ‰“å¼€ï¼ˆSupabase å…è®¸ï¼‰ã€‚
- **è¯¾ç¨‹åŠ è½½å¤±è´¥**ï¼šæ£€æŸ¥ `Row Level Security` ç­–ç•¥ä»¥åŠ `anon key` æ˜¯å¦æ­£ç¡®ã€‚

## åŽç»­æ‰©å±•æ–¹å‘

- ç®¡ç†ç«¯ï¼šè¯¾ç¨‹å¢žåˆ æ”¹ã€å®¹é‡æŽ§åˆ¶
- æ—¥ç¨‹å†²çªæ£€æµ‹
- é€‰è¯¾ç»Ÿè®¡æŠ¥è¡¨
- ç»“åˆ Supabase Functions å®žçŽ°ä¸šåŠ¡æ ¡éªŒ

æ¬¢è¿Žåœ¨æ­¤åŸºç¡€ä¸Šç»§ç»­è¿­ä»£ï¼Œç¥å¼€å‘é¡ºåˆ© ðŸŽ“

=======
# Course-Selection
>>>>>>> dd9f040e1ce45b555f53866a63b09cc351ade6b7
